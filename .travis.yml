language: node_js
sudo: required
node_js: 
  - 12.18.3

cache:
  directories:
    - node_modules

branches:
  only:
    - hexo_blog

before_install:
  - npm install -g hexo-cli

# S: Build Lifecycle
install:
  - npm install
  # - npm install hexo-math --save
  # - npm install hexo-abbrlink --save
  # - npm install hexo-generator-search --save
  # - npm install hexo-generator-searchdb --save
  # - npm install hexo-blog-encrypt --save
  # - npm install --save hexo-filter-sequence
  # - npm install hexo-deployer-git --save

before_script:
 # - npm install -g gulp

script:
  - cd blog
  - hexo clean
  - hexo generate
  - cd ..
  - cd imissyou
  - hexo clean
  - hexo generate
  - cd ..

after_script:
  - git config --global user.name "jixiaoyong"
  - git config --global user.email jixiaoyong1995@gmail.com
  - git config --list
  - pwd
  - ls
  - cd ..
  - mkdir publish
  - cd publish
  - git clone https://${GH_TOKEN}@github.com/jixiaoyong/jixiaoyong.github.io.git
  - rm -rf ./jixiaoyong.github.io/blog/*
  - rm -rf ./jixiaoyong.github.io/imissyou/*
  - cd ..
  - pwd
  - ls
  - cp -rf jixiaoyong.github.io/blog/public/* publish/jixiaoyong.github.io/blog/
  - cp -rf jixiaoyong.github.io/imissyou/public/* publish/jixiaoyong.github.io/imissyou/
  - cd publish/jixiaoyong.github.io/
  - git add .
  - git commit -m "auto update by www.travis-ci.org"
  - git push

# E: Build LifeCycle
