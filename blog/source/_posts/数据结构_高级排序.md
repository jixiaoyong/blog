---
title: æ•°æ®ç»“æ„_é«˜çº§æ’åº
date: 2019-01-03 19:59:13
tag: æ•°æ®ç»“æ„
---

# å‰è¨€

æœ¬æ–‡ä»‹ç»ä¸¤ç§é«˜çº§æ’åºï¼šå¸Œå°”æ’åºå’Œå¿«é€Ÿæ’åºã€‚

å¸Œå°”æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯$O(N*(LogN)^2)$ï¼Œç®€å•æ˜“å®ç°ï¼Œåœ¨æ‰€æœ‰æ’åºä¸­å¯ä»¥ä¼˜å…ˆä½¿ç”¨ã€‚

å¿«é€Ÿæ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯$O(N*LogN)$ï¼Œæ˜¯æ‰€æœ‰é€šç”¨æ’åºä¸­æœ€å¿«çš„ã€‚

æ’åºæ–¹å‘ï¼š`å° â†’ å¤§`ã€‚

# å¸Œå°”æ’åº

å¸Œå°”æ’åºåŸºäºæ’å…¥æ’åºï¼ˆå°†å·¦è¾¹æ— é¡»çš„å…ƒç´ ä¾æ¬¡æ’å…¥åˆ°å³è¾¹æœ‰åºæ•°ç»„ä¸­ï¼‰ï¼Œä¸åŒçš„æ˜¯å¸Œå°”æ’åºçš„å¢é‡é€æ¸å‡å°åˆ°1ï¼Œè€Œæ’å…¥æ’åºçš„å¢é‡ä¸€ç›´æ˜¯1ã€‚

> å¢é‡ æ’åºçš„æ—¶å€™è¿›è¡Œæ¯”è¾ƒçš„ä¸¤ä¸ªå…ƒç´ ä¹‹é—´çš„é—´éš”ï¼š
>
> ```java
> int[] arr = {1,2,3,4,5};
> ```
>
> å¯¹äºæ•°ç»„`arr`ä¸­çš„å…ƒç´ æ¥è¯´ï¼Œ`1`å’Œ `2`ä¹‹é—´çš„å¢é‡æ˜¯1ï¼Œè€Œ `1`å’Œ `3`ä¹‹é—´çš„å¢é‡æ˜¯2ï¼Œä»¥æ­¤ç±»æ¨ã€‚

ç”±äºæ’å…¥æ’åºåœ¨æ’åºè¿›è¡Œåˆ°åæœŸï¼Œå³è¾¹æœ‰åºæ•°ç»„çš„å¤§å°å˜å¤§ï¼Œå¯¼è‡´æ’å…¥å’Œç§»åŠ¨çš„æ¬¡æ•°è¶Šæ¥è¶Šå¤šï¼Œè€Œä¸”å¦‚æœæ•°ç»„æ°å¥½æ˜¯ååºçš„ï¼Œä¼šå¾ˆè€—æ—¶ã€‚

è€Œå¸Œå°”æ’åºåœ¨åˆšå¼€å§‹æ’åºæ—¶ï¼Œå…ˆå–ä¸€ä¸ªé€‚å½“çš„å¢é‡`n`ï¼ŒæŒ‰ç…§è¿™ä¸ªå¢é‡å¯¹æ•°ç»„`arr`è¿›è¡Œæ’å…¥æ’åºï¼Œå¾—åˆ°ä¸€ä¸ª*åŸºæœ¬æœ‰åº*çš„æ•°ç»„ï¼Œä»–å†…éƒ¨æœ‰`n`ä¸ªæœ‰åºçš„å­æ•°ç»„ï¼›å†å°†å¢é‡`n`å‡ä¸€ï¼Œåœ¨æ­¤è¿›è¡Œæ’å…¥æ’åºï¼›å¦‚æ­¤åå¤ç›´åˆ°nä¸º1ï¼Œæ’åºå®Œæ¯•çš„æ•°æ®å³ä¸ºæœ‰åºæ•°ç»„ã€‚

![å¸Œå°”æ’åºâ€”â€”4å¢é‡æ’åºç¤ºæ„å›¾](https://jixiaoyong.github.io/images/20190103191850.png)

## å¢é‡çš„é€‰æ‹©

å¯ä»¥æƒ³è±¡ï¼Œå¢é‡çš„è®¡ç®—å¯¹å¸Œå°”æ’åºæ•ˆç‡æœ‰å¾ˆå¤§å½±å“ã€‚

è¿™äº›å¢é‡çš„é›†åˆç§°ä¸º**é—´éš”åºåˆ—**ï¼Œä¸€èˆ¬è¦æ±‚è¿™äº›å¢é‡ä¹‹é—´äº’è´¨ï¼Œè¿™æ ·å°±ä¸ä¼šå¯¹å·²ç»æ’åºçš„æ•°ç»„å†æ¬¡æ’åºã€‚

ä¸€ä¸ªå¸¸ç”¨çš„é—´éš”åºåˆ—è®¡ç®—å…¬å¼ï¼š

```kotlin
h=3h+1
è®¡ç®—çš„hå€¼ä¸€èˆ¬ä¸ºï¼š1,13,40,21...
```

å¢é‡`h`è¦å°äºæ•°ç»„å¤§å°ã€‚

## å…·ä½“å®ç°

```kotlin
/**
 * å¸Œå°”æ’åº
 * æ€è·¯:
 * 1/3 å°†å¾…æ’åºæ•°ç»„åˆ†ä¸ºhä¸ªé—´éš”ä¸ºhçš„å°æ•°ç»„ï¼Œ
 * 2/3 å¯¹è¿™äº›å°æ•°ç»„è¿›è¡Œæ’å…¥æ’åº,å°†æ’åºç»“æœå†™å…¥åŸå¾…æ’åºæ•°ç»„
 * 3/3 æŒ‰ç…§ h=3*h+1 çš„ç®—æ³•å‡å°håœ¨æ­¤è¿›è¡Œå¸Œå°”æ’åºï¼Œç›´è‡³hä¸º1
 * --å°†å¤§æ•°ç»„åˆ†ä¸ºè¾ƒå°çš„æ•°ç»„ï¼Œæ‹å®Œåºåå†å¯¹è¿™äº›"æœ‰åº"çš„å°æ•°ç»„è¿›è¡Œæ’åº
 * å° - > å¤§
 */
fun shellSort(intArray: IntArray, h: Int): IntArray {
    if (h == 1) {
        return insertSort(intArray)
    } else {
        //é—´éš”æ’åº
        for (x in 0 until h) {//ä¾æ¬¡éå†x,x+1,x+2 ... x+(h-1);å½¢æˆhä¸ªæœ‰åºå­æ•°ç»„

            var list = arrayListOf<Int>()
            intArray.forEachIndexed { index, i ->
                if ((index + x) % h == 0) {
                    list.add(i)
                }
            }
            var partSortArr = insertSort(list.toIntArray())
            var listIndex = 0
            intArray.forEachIndexed { index, i ->
                if ((index + x) % h == 0) {
                    intArray[index] = partSortArr[listIndex++]
                }
            }
        }

        //å°†å¢é‡å‡å°ï¼Œå†æ¬¡å‡å°æ’åºï¼Œç›´åˆ°h==1
        return shellSort(intArray, (h - 1) / 3)
    }
}

/**
 * è·å–å¸Œå°”æ’åºé—´éš”
 * å¯¹æ’åºé€Ÿåº¦å½±å“è¾ƒå¤§ï¼Œè¦æ±‚äº’è´¨ï¼Œè®¡ç®—æ–¹å¼ä¸å”¯ä¸€
 */
fun getShellSortH(range: Int): Int {
    if (range < 5) {
        return 1
    }
    var h = 1
    while (h < range) {
        h = 3 * h + 1
    }
    return (h - 1) / 3
}


/**
 * æ’å…¥æ’åº
 * æ€è·¯ï¼š
 * 1/2 å…ˆå‡è®¾ç¬¬ä¸€ä¸ªæ•°æ˜¯å·²ç»æ’å¥½åºçš„
 * 2/2 å°†åé¢çš„æ•°å­—ä¾æ¬¡ä¸å…¶æ¯”è¾ƒï¼Œå¹¶æ’å…¥åˆ°å¯¹åº”ä½ç½®
 * small -> big
 */
fun insertSort(intArray: IntArray): IntArray {

    for (i in 1 until intArray.size) {
        for (j in 0 until i) {
            if (intArray[i] < intArray[j]) {
                val temp = intArray[i]
                for (x in i downTo j) {
                    if (x - 1 < 0) {
                        break
                    }
                    intArray[x] = intArray[x - 1]
                }
                intArray[j] = temp
            }
        }
    }

    return intArray
}
```

# å¿«é€Ÿæ’åº

å¿«é€Ÿæ’åºåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯æœ€å¿«çš„ã€‚

## åˆ’åˆ†

åˆ’åˆ†æŒ‡åœ¨ä¸€ç»„æ•°æ®ä¸­ï¼ŒæŒ‡å®šä¸€ä¸ªå€¼`C`,æ‰€æœ‰å°äº`C`çš„ç§»åŠ¨åˆ°å·¦è¾¹ï¼Œæ‰€æœ‰å¤§äº`C`çš„ç§»åŠ¨åˆ°å³è¾¹ã€‚

é€‰å‡ºæ¥çš„è¿™ä¸ªå€¼`C`ï¼Œå«åš**æ¢çº½**ã€‚

### åˆ’åˆ†ç®—æ³•

* åœ¨æ•°æ®å·¦å³ä¸¤ç«¯å„æœ‰ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å½“å‰å…ƒç´ ï¼š`left`ï¼Œ`right`ï¼›
* `left`æŒ‡é’ˆå‘å³ç§»åŠ¨æŸ¥æ‰¾æ¯”`C`å¤§çš„å€¼ï¼Œ`right`æŒ‡é’ˆå‘å·¦ç§»åŠ¨æŸ¥æ‰¾æ¯”`C`å°çš„å€¼ï¼Œå½“é‡åˆ°æ»¡è¶³æ¡ä»¶çš„å…ƒç´ åˆ™é€€å‡ºï¼›
* å½“ä¸¤ä¸ªæŒ‡é’ˆéƒ½é€€å‡ºæ—¶ï¼Œå°†å…¶æŒ‡å‘çš„å…ƒç´ äº¤æ¢ä½ç½®ï¼Œç„¶åå†åˆ†åˆ«ç§»åŠ¨æŒ‡é’ˆï¼Œç›´åˆ°ä¸¤ä¸ªæŒ‡é’ˆç›¸é‡ï¼Œåˆ’åˆ†ç»“æŸã€‚



## å¿«é€Ÿæ’åºçš„æ€è·¯

å¿«é€Ÿæ’åºï¼Œé€‰å–ä¸€ä¸ªæ¢çº½ï¼Œå°†æ•°ç»„**åˆ’åˆ†**ä¸ºä¸¤ä¸ªå­æ•°ç»„ï¼Œè¿™æ ·åœ¨æ¢çº½`C`ä¸¤è¾¹çš„æ•°ç»„æ»¡è¶³ï¼š

```
[å·¦è¾¹å­æ•°ç»„æ‰€æœ‰å…ƒç´ ] < n < [å³è¾¹å­æ•°ç»„æ‰€æœ‰å…ƒç´ ] 
```

è¿™æ ·å°†å¾—åˆ°çš„æ¯ä¸ªå­æ•°ç»„éƒ½åˆ’åˆ†ä¸ºä¸¤ä¸ªå­æ•°ç»„ï¼Œç›´åˆ°å­æ•°ç»„åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼ˆä¸€ä¸ªå…ƒç´ å°±æ˜¯æœ‰åºçš„ï¼‰ï¼Œè¿™æ ·å°±å®Œæˆäº†æ•´ä¸ªå¿«é€Ÿæ’åºã€‚

## æ¢çº½çš„é€‰æ‹©

æ¢çº½é€‰æ‹©å½±å“ç€å¿«é€Ÿæ’åºçš„æ•ˆç‡ï¼š

* æœ€ç®€å•çš„ï¼Œå¯ä»¥é€‰å–æ•°ç»„ç¬¬ä¸€ä¸ªæˆ–è€…æœ€åä¸€ä¸ªå…ƒç´ 
* "ä¸‰æ•°æ®é¡¹å–ä¸­"æ³•ï¼Œåœ¨æ•°ç»„é¦–ã€å°¾ã€ä¸­å–æ•°æ’åºï¼Œé€‰ä¸­é—´çš„æ•°ä½œä¸ºæ¢çº½ã€‚è¿™æ ·æ’åºæ•°ç»„å¤§å°è¦>3ã€‚

## å…·ä½“å®ç°

```kotlin
/**
 * å¿«é€Ÿæ’åºæ‰€ç”¨çš„æ•°ç»„ï¼Œä½¿ç”¨å‰å…ˆåˆå§‹åŒ–
 */
lateinit var quickArray: IntArray

/**
 * å¿«é€Ÿæ’åºç®—æ³•
 * #1 é€‰æ‹©æ•°ç»„æœ€å³ç«¯å…ƒç´ ä½œä¸ºæ¢çº½
 * æ€æƒ³æ˜¯
 * 1/2 é€‰å‡ºä¸€ä¸ªæ¢çº½ï¼Œå…ˆå°†å…¶æŒ‰å¤§å°åˆ’åˆ†ä¸ºå·¦å³ä¸¤éƒ¨åˆ†
 * 2/2 åœ¨åˆ’åˆ†å¥½çš„ä¸¤ä¸ªæ•°ç»„ä¸­ï¼Œåˆ†åˆ«å†æ‰¾ä¸€ä¸ªæ¢çº½ï¼Œé‡å¤æ­¥éª¤1
 */
fun quickSort1(left: Int, right: Int) {
    if (right - left <= 0) {
        return
    }
    /**
     * n è¿™ä¸ªæ¢çº½çš„å–æ³•å¾ˆå…³é”®ï¼Œå†³å®šäº†ç®—æ³•çš„é€Ÿåº¦
     * é™¤è¿‡è¿™é‡Œç”¨åˆ°çš„å–æ³•ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æœ‰"ä¸‰æ•°æ®é¡¹å–ä¸­"æ³•ï¼Œåœ¨æ•°ç»„é¦–ã€å°¾ã€ä¸­å–æ•°æ’åºï¼Œé€‰ä¸­é—´çš„æ•°ä½œä¸ºæ¢çº½ã€‚è¿™æ ·æ’åºæ•°ç»„è¦>3
     * å¯¹äºè¿™äº›å°äº3çš„æ•°ç»„å¯ä»¥ç”¨æ’å…¥æ’åºæ³•è¿›è¡Œæ’åº
     */
    val n = quickArray[right]
    val nIndex = devideArrayByN1(left, right, n)
    if (nIndex > 0) {
        quickSort1(left, nIndex - 1)
    }
    quickSort1(nIndex + 1, right)
}

/**
 * åˆ’åˆ†ç®—æ³•å†³å®šäº†æ’åºçš„å‡†ç¡®æ€§
 * æå‡ºä¸€ä¸ªé˜ˆå€¼ï¼Œå¹¶ä»¥æ­¤å°†æ•°ç»„åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†
 * å·¦è¾¹éƒ½å°äºæ¢çº½ï¼Œå³è¾¹éƒ½å¤§äºæ¢çº½
 */
private fun devideArrayByN1(left: Int, right: Int, n: Int): Int {
    var leftIndex = left - 1
    var rightIndex = right

    while (leftIndex < rightIndex) {
        while (leftIndex < rightIndex && quickArray[++leftIndex] < n) {
        }
        while (leftIndex < rightIndex && quickArray[--rightIndex] > n) {
        }
        val temp = quickArray[leftIndex]
        quickArray[leftIndex] = quickArray[rightIndex]
        quickArray[rightIndex] = temp
    }

    for (i in right downTo rightIndex) {
        if (i < 1) {
            break
        }
        quickArray[i] = quickArray[i - 1]
    }
    quickArray[rightIndex] = n
    return rightIndex
}
```

# æ€»ç»“

å¸Œå°”æ’åºã€å¿«é€Ÿæ’åºçš„æ€è·¯ï¼Œéƒ½æ˜¯å°†ä¸€ä¸ªå¤§çš„å¾…æ’åºæ•°ç»„ï¼Œé€šè¿‡ä¸åŒçš„æ–¹æ³•æ‹†åˆ†æˆå°çš„å­æ•°ç»„ï¼Œè¿™æ ·æ¯”è¾ƒã€ç§»åŠ¨çš„æ¬¡æ•°è¦å°å¾ˆå¤šã€‚

# æºç 

[ğŸ‘‰ç‚¹è¿™é‡Œ](https://github.com/jixiaoyong/Notes-Files/blob/master/AndroidLearningResource/java_note/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AD%A6%E4%B9%A0/sort/SortUtils.kt) æŸ¥çœ‹æºç 
